FROM scarlettos/scarlett_os-flatpak:latest

ARG HOST_USER_ID=1000
ENV HOST_USER_ID ${HOST_USER_ID}
ARG HOST_GROUP_ID=1000
ENV HOST_GROUP_ID ${HOST_GROUP_ID}

# COPY . /home/developer/

USER root

RUN usermod \
         -u $HOST_USER_ID \
         -g $HOST_GROUP_ID \
         developer && \
    mkdir -p /home/developer/dev && \
    chown $HOST_USER_ID:$HOST_GROUP_ID \
         -Rv /home/developer/ && \
         ls -lta /home/developer && \
         id -u

CMD ["/usr/sbin/init"]
